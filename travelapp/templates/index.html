{% extends "base.html" %}

{% block content %}
<div class="grid-container">
    <!-- 좌측 입력 폼 -->
<div class="left-panel">
    <form method="POST">
        <h3>📋 여행 조건 입력</h3>

        <!-- 여행 날짜 -->
        <label>여행 날짜</label>
        <div class="row">
            <input type="date" name="start_date" placeholder="시작일">
            <input type="date" name="end_date" placeholder="종료일">
        </div>

        <!-- 누구와 / 총 인원 -->
        <div class="row">
            <div class="half">
                <label>누구와</label>
                <select name="companions">
                    <option value="혼자">혼자</option>
                    <option value="친구">친구</option>
                    <option value="연인">연인</option>
                    <option value="가족">가족</option>
                    <option value="기타">기타</option>
                </select>
            </div>
            <div class="half">
                <label>총 인원수</label>
                <select name="people_count">
                    {% for i in range(1, 11) %}
                        <option value="{{ i }}">{{ i }}명</option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <!-- 장소 / 테마 -->
        <label>여행 장소</label>
        <input type="text" name="location" placeholder="예: 경주, 부산">

        <label>여행 테마</label>
        <select name="theme">
            <option value="맛집">맛집</option>
            <option value="카페">카페</option>
            <option value="자연경관">자연경관</option>
            <option value="역사탐방">역사탐방</option>
            <option value="축제/이벤트">축제/이벤트</option>
            <option value="쇼핑">쇼핑</option>
        </select>

        <!-- 프롬프트 -->
        <label>추가 조건 (GPT에게 말해보세요)</label>
        <textarea name="user_prompt" rows="4" placeholder="예: 첫날은 동궁과월지를 꼭 넣어줘요. 3일차에 친구가 합류합니다."></textarea>

        <button type="submit">일정 생성</button>
    </form>
</div>

    <!-- 중앙 일정 결과 -->
    <div class="center-panel">
        <h3>📅 여행 일정</h3>
        <div class="itinerary-box">
            {{ result | safe }}
        </div>
    </div>

    <!-- 우측 지도 -->
    <div class="right-panel">
        <h3>🗺️ 지도</h3>
        <div id="map" style="width: 100%; height: 400px;"></div>
    </div>
</div>

<script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey={{ kakao_key }}"></script>
<script>
window.onload = function () {
    var container = document.getElementById('map');
    var options = {
        center: new kakao.maps.LatLng(35.8562, 129.2247), // 예: 경주
        level: 6
    };
    var map = new kakao.maps.Map(container, options);

    // 마커 예시
    var markerPosition  = new kakao.maps.LatLng(35.8347, 129.2849);
    var marker = new kakao.maps.Marker({ position: markerPosition });
    marker.setMap(map);
};
</script>

{% endblock %}
